{"meta":{"title":"菜菜的冬瓜","subtitle":"jsyc_znd@163.com","description":"一个热爱生活和分享技术的正经开发","author":"Mark Zhang","url":"https://dongfengzui-z.github.io","root":"/"},"pages":[{"title":"yourdiy","date":"2020-09-11T02:59:02.000Z","updated":"2020-09-11T02:59:02.560Z","comments":true,"path":"yourdiy/index.html","permalink":"https://dongfengzui-z.github.io/yourdiy/index.html","excerpt":"","text":""}],"posts":[{"title":"道歉有用的话还要键盘干嘛","slug":"道歉有用的话还要键盘干嘛","date":"2020-09-11T09:07:08.000Z","updated":"2020-09-11T09:23:27.552Z","comments":true,"path":"2020/09/11/道歉有用的话还要键盘干嘛/","link":"","permalink":"https://dongfengzui-z.github.io/2020/09/11/%E9%81%93%E6%AD%89%E6%9C%89%E7%94%A8%E7%9A%84%E8%AF%9D%E8%BF%98%E8%A6%81%E9%94%AE%E7%9B%98%E5%B9%B2%E5%98%9B/","excerpt":"","text":"吵架后道歉服软的可爱句子1、 有一个菠萝去理发，他坐了好久理发师一直都没有给他理发，他就说““理理我吧” 2、（首项+末项）项数/2 “干嘛” “求和”*","categories":[],"tags":[{"name":"生活","slug":"生活","permalink":"https://dongfengzui-z.github.io/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"图片转base64","slug":"图片转base64","date":"2020-09-11T08:55:03.000Z","updated":"2020-09-11T09:03:18.587Z","comments":true,"path":"2020/09/11/图片转base64/","link":"","permalink":"https://dongfengzui-z.github.io/2020/09/11/%E5%9B%BE%E7%89%87%E8%BD%ACbase64/","excerpt":"","text":"图片转base64的方法请求网络的图片时，在dom结构已经生成了还没渲染，就会出现图片丢失问题 123456789101112131415161718192021222324252627function getBase64(img) &#123; function getBase64Image(img, width, height) &#123; &#x2F;&#x2F;width、height调用时传入具体像素值，控制大小 ,不传则默认图像大小 var canvas &#x3D; document.createElement(&quot;canvas&quot;); canvas.width &#x3D; width ? width : img.width; canvas.height &#x3D; height ? height : img.height; var ctx &#x3D; canvas.getContext(&quot;2d&quot;); ctx.drawImage(img, 0, 0, canvas.width, canvas.height); var dataURL &#x3D; canvas.toDataURL(&#39;image&#x2F;jpeg&#39;); return dataURL; &#125; var image &#x3D; new Image(); &#x2F;&#x2F; image.crossOrigin &#x3D; &#39;anonymous&#39;; image.src &#x3D; img; var deferred &#x3D; $.Deferred(); if (img) &#123; image.onload &#x3D; function() &#123; deferred.resolve(getBase64Image(image)); &#x2F;&#x2F;将base64传给done上传处理 &#125; image.onerror&#x3D;function(error)&#123; console.log(&#39;error&#39;,error); deferred.reject(error) &#125; return deferred.promise(); &#x2F;&#x2F;问题要让onload完成后再return sessionStorage[&#39;imgTest&#39;] &#125;else&#123; console.log(&quot;我返回的不是img&quot;) &#125;&#125;","categories":[],"tags":[{"name":"前端","slug":"前端","permalink":"https://dongfengzui-z.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"安卓和ios使用背景音乐","slug":"背景音乐","date":"2020-09-11T08:40:39.000Z","updated":"2020-09-11T08:55:23.918Z","comments":true,"path":"2020/09/11/背景音乐/","link":"","permalink":"https://dongfengzui-z.github.io/2020/09/11/%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90/","excerpt":"安卓和ios使用背景音乐H5解决ios不能自动播放音乐 1. 需要创建一个音乐对象 var audio = new Audio(&quot;http://wwww.xxx.com/mmm.mp3&quot;);","text":"安卓和ios使用背景音乐H5解决ios不能自动播放音乐 1. 需要创建一个音乐对象 var audio = new Audio(&quot;http://wwww.xxx.com/mmm.mp3&quot;); 2. 播放自动播放 1234567891011121314151617 &#x2F;&#x2F;--创建页面监听，页面加载完毕--触发音频播放 document.addEventListener(&#39;DOMContentLoaded&#39;, function() &#123; audio.play(); &#125;); &#x2F;&#x2F;--创建触摸监听，当浏览器打开页面时，触摸屏幕触发事件，进行音频播放 document.addEventListener(&#39;touchstart&#39;, function() &#123; audio.play(); &#125;);var ttime &#x3D; setInterval(function() &#123; if (audio.readyState &#x3D;&#x3D;&#x3D; 4) &#123; &#x2F;&#x2F;audio对象的状态建议参考audio的官网详解 audio.currentTime &#x3D; 0; audio.play(); clearInterval(ttime); &#125; else &#123; console.log(&#39;audio.readyState&#39;, audio.readyState); &#125; &#125;, 100); 安卓一般能自动播放音乐 直接创建对象使用方法","categories":[],"tags":[{"name":"移动端","slug":"移动端","permalink":"https://dongfengzui-z.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"}]},{"title":"html2canvas的使用","slug":"html2canvas的使用","date":"2020-09-11T08:00:52.000Z","updated":"2020-09-11T08:33:53.303Z","comments":true,"path":"2020/09/11/html2canvas的使用/","link":"","permalink":"https://dongfengzui-z.github.io/2020/09/11/html2canvas%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"html2canvas的使用解决截图不全和不清晰问题 *使用 var scale = 2;将画布放大两倍，再缩小可以解决清晰度问题 *","text":"html2canvas的使用解决截图不全和不清晰问题 *使用 var scale = 2;将画布放大两倍，再缩小可以解决清晰度问题 * 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354 var realHtml &#x3D; document.getElementById(&quot;end&quot;); var width &#x3D; realHtml.offsetWidth; var height &#x3D; realHtml.offsetHeight; var canvas &#x3D; document.createElement(&quot;canvas&quot;); var scale &#x3D; 2; canvas.width &#x3D; width * scale; canvas.height &#x3D; height * scale; canvas.getContext(&quot;2d&quot;).scale(scale, scale); var rect &#x3D; $(&quot;#end&quot;).get(0).getBoundingClientRect(); &#x2F;&#x2F;获取元素相对于视察的偏移量 canvas.getContext(&quot;2d&quot;).translate(-rect.left, -rect.top); &#x2F;&#x2F;设置context位置，值为相对于视窗的偏移量负值，让图片复位 var opts &#x3D; &#123; dpi: window.devicePixelRatio * 2, tainttest: true, scale: scale, useCORS: true, canvas: canvas, height: $(&quot;#end&quot;).outerHeight &#125;; html2canvas(realHtml, opts).then(function(canvas) &#123; var oImg &#x3D; new Image(); oImg.crossOrigin &#x3D; &#39;anonymous&#39;; &#x2F;&#x2F; 跨域问题 oImg.className &#x3D; &quot;res&quot; oImg.src &#x3D; canvas.toDataURL(&#39;image&#x2F;png&#39;); $(&quot;.img-container&quot;)[0].appendChild(oImg); if(isAndroid)&#123; $(&#39;.res&#39;).on(&#123; touchstart: function(e) &#123; &#x2F;&#x2F; 长按事件触发 timeOutEvent &#x3D; setTimeout(function() &#123; timeOutEvent &#x3D; 0; &#x2F;&#x2F;保存图片弹窗 &#x2F;&#x2F;省略长按触发的事件 &#125; &#125;); &#125;, 400); &#x2F;&#x2F;长按400毫秒 &#x2F;&#x2F; e.preventDefault(); &#125;, touchmove: function() &#123; clearTimeout(timeOutEvent); timeOutEvent &#x3D; 0; &#125;, touchend: function() &#123; clearTimeout(timeOutEvent); if (timeOutEvent !&#x3D; 0) &#123;&#125; return false; &#125; &#125;) &#125; &#125;);&#125;","categories":[],"tags":[{"name":"前端","slug":"前端","permalink":"https://dongfengzui-z.github.io/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"前端下载文件","slug":"前端下载文件","date":"2020-09-11T02:26:16.000Z","updated":"2020-09-11T08:33:33.211Z","comments":true,"path":"2020/09/11/前端下载文件/","link":"","permalink":"https://dongfengzui-z.github.io/2020/09/11/%E5%89%8D%E7%AB%AF%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/","excerpt":"前端下载文件一、通过window.open() window.open(fileUrl) 二、通过流方式 123456789101112131415axios(&#123; url: url, method: &#39;get&#39;, responseType: &#39;blob&#39; &#125;).then((res) &#x3D;&gt; &#123; let url &#x3D; window.URL.createObjectURL(new Blob([res.data])); let link &#x3D; document.createElement(&#39;a&#39;); link.style.display &#x3D; &#39;none&#39; link.href &#x3D; url; link.setAttribute(&#39;download&#39;, data); &#x2F;&#x2F;这个data带有扩展名 document.body.appendChild(link); link.click(); &#125;).catch(() &#x3D;&gt; &#123; this.$Message.error(&#39;下载失败&#39;); &#125;)","text":"前端下载文件一、通过window.open() window.open(fileUrl) 二、通过流方式 123456789101112131415axios(&#123; url: url, method: &#39;get&#39;, responseType: &#39;blob&#39; &#125;).then((res) &#x3D;&gt; &#123; let url &#x3D; window.URL.createObjectURL(new Blob([res.data])); let link &#x3D; document.createElement(&#39;a&#39;); link.style.display &#x3D; &#39;none&#39; link.href &#x3D; url; link.setAttribute(&#39;download&#39;, data); &#x2F;&#x2F;这个data带有扩展名 document.body.appendChild(link); link.click(); &#125;).catch(() &#x3D;&gt; &#123; this.$Message.error(&#39;下载失败&#39;); &#125;) 三、通过a标签打开新页面 123456789101112export const exportFile &#x3D; (url,fileName) &#x3D;&gt; &#123; let link &#x3D; document.createElement(&#39;a&#39;); let body &#x3D; document.querySelector(&#39;body) link.href &#x3D; url link.download &#x3D; fileName link.style.display &#x3D; &#39;none&#39; body.appendChild(link) link.click() body.removeChild(link) &#125; &nbsp;&nbsp;&nbsp;&nbsp;a标签下载方式同window.open()相似，优点是可以自定义下载后的文件名，download属性可以自定义","categories":[],"tags":[{"name":"前端","slug":"前端","permalink":"https://dongfengzui-z.github.io/tags/%E5%89%8D%E7%AB%AF/"}]}],"categories":[],"tags":[{"name":"生活","slug":"生活","permalink":"https://dongfengzui-z.github.io/tags/%E7%94%9F%E6%B4%BB/"},{"name":"前端","slug":"前端","permalink":"https://dongfengzui-z.github.io/tags/%E5%89%8D%E7%AB%AF/"},{"name":"移动端","slug":"移动端","permalink":"https://dongfengzui-z.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"}]}